<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>valentine Day</title>
    <link rel="stylesheet" href="style.css">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js">
    </script>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js">
    </script>
</head>
<body onload = "autoClick();">
    <img class="love-tree" src="images/love-tree.png" alt="">
    <img class="branches" src="images/branches.png" alt="">
    <img class="butterfly" src="images/butterfly.png" alt="">
    <div class="container">
        
        <div class="main">
            
            <div class="qoute">
                <img class="qbg" src="images/q-bg.png" alt="">
                <p id="qouteP" style="font-style: italic;">"I am who I am because of you. You are every reason, every hope, and every dream Iâ€™ve ever had."</p>
                <div class="userInpt">
                    <input type="text" name="" placeholder="Enter Name Here" id="inpt">
                    <button id="submit">Submit</button>
                </div>
            </div>
            <div class="wrapper">
                <img src="images/rose.png" alt="">
                <p id="afterText"><span id="name"></span> Will you be my valentine?</p>
                <div class="btns">
                    <button id="yes">YES</button>
                    <button id="no">NO</button>
                </div>
                <img class="hide" src="images/heart.png" alt="">
                <img class="m1" src="images/Little-heart.png" alt="">
                <img class="m2" src="images/hearts.png" alt="">
                <img class="m3" src="images/flower.png" alt="">
            </div>
            <button id="share">Share</button>
            <a id="download"><img src="images/downloading.png"></a>
        </div>
        
        
    </div>
    <p class="copy">Follow me on Instagram - im_4r5h</p>
    
    <script>
        // let personName = prompt("Enter Your Name Please");
        let personName = document.querySelector("#inpt");
        let userInpt = document.querySelector(".userInpt");
        let qouteP = document.querySelector("#qouteP");
        let btnSubmit = document.querySelector("#submit");

        const link = encodeURI(window.location.href);
        const msg = encodeURIComponent();
        const title = encodeURIComponent(document.querySelector('title').textContent)
        
        const share = document.querySelector("#share");
        const download = document.querySelector("#download");
        
        
        share.addEventListener('click', event => {
			if (navigator.share) {
				navigator.share({

					title: "Happy Valentine Day",
					url: link,
                    text: "Hi, " + personName.value + " I found a beautiful message for you!!"
				}).then(() => {
					console.log('Thanks for sharing!');
				}).catch(err => {
					console.log(
					"Error while using Web share API:");
					console.log(err);
				});
			} else {
				alert("Browser doesn't support this API !");
			}
		})
        
        console.log([link, msg, title]);

        btnSubmit.addEventListener("click", function(){
            let person = personName.value;
            document.querySelector("#name").innerHTML = person;
            qouteP.style.display = "block";
            userInpt.classList.add("btns-h");
        })
        
        let hide = document.querySelector(".hide");
        let wrapper = document.querySelector(".wrapper");
        let hide1 = document.querySelector(".btns");
        
        let yes = document.querySelector("#yes");
        yes.addEventListener("click", function(){
            document.querySelector("#afterText").innerHTML = "Thank You So Much &hearts;&hearts;&hearts;<br>" + personName.value;
            hide.classList.add("block");
            hide1.classList.add("btns-h");
            share.style.display = "block";
            download.style.display = "block";
            // hide.classList.remove("btns");
        })

        let no = document.querySelector("#no");
        const wrapperRect = wrapper.getBoundingClientRect();
        const noRect = no.getBoundingClientRect();
        no.addEventListener("mouseover", ()=>{
            const i = Math.floor(Math.random() * (wrapperRect.width - noRect.width)) + 1;
            const j = Math.floor(Math.random() * (wrapperRect.height - noRect.height)) + 1;

            no.style.left = i + 'px';
            no.style.top = j + 'px';
        })

        function autoClick(){
        $("#download").click();
      }

      $(document).ready(function(){
        var element = $(".wrapper");

        $("#download").on('click', function(){

          html2canvas(element, {
            onrendered: function(canvas) {
              var imageData = canvas.toDataURL("image/jpg");
              var newData = imageData.replace(/^data:image\/jpg/, "data:application/octet-stream");
              $("#download").attr("download", "valentine.jpg").attr("href", newData);
            }
          });

        });
      });

    </script>
</body>
</html>
